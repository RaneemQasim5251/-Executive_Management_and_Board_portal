/* ===== ACCESSIBILITY & EYE-COMFORT STYLES ===== */

/* CSS Custom Properties for Theme System */
:root {
  /* Brand Colors [[memory:5325443]] */
  --federal-blue: #0C085C;
  --black: #000000;
  --egyptian-blue: #363692;
  --red: #FF2424;
  --celestial-blue: #0095CE;
  
  /* Semantic Colors */
  --primary-color: var(--federal-blue);
  --secondary-color: var(--egyptian-blue);
  --accent-color: var(--celestial-blue);
  --error-color: var(--red);
  
  /* Typography Scale */
  --font-size-base: 16px;
  --font-scale-ratio: 1.2;
  --line-height-base: 1.5;
  --font-family-base: 'Inter', 'SF Pro Display', system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  
  /* Spacing Scale */
  --space-xs: 4px;
  --space-sm: 8px;
  --space-md: 16px;
  --space-lg: 24px;
  --space-xl: 32px;
  --space-2xl: 48px;
  
  /* Animation & Transitions */
  --animation-duration: 300ms;
  --transition-duration: 200ms;
  --transition-easing: cubic-bezier(0.4, 0, 0.2, 1);
  
  /* Focus Ring */
  --focus-ring-width: 2px;
  --focus-ring-color: #4096ff;
  --focus-ring-offset: 2px;
  
  /* Direction & Text Alignment */
  --direction: ltr;
  --text-align: left;
  
  /* Border Radius */
  --border-radius-sm: 4px;
  --border-radius-md: 8px;
  --border-radius-lg: 12px;
  --border-radius-xl: 16px;
  
  /* Shadows */
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 8px 25px rgba(0, 0, 0, 0.15);
  --shadow-xl: 0 25px 50px rgba(0, 0, 0, 0.25);
}

/* ===== FLUID TYPOGRAPHY SYSTEM ===== */
/* Base font size scales from 14px to 18px based on viewport */
html {
  font-size: clamp(14px, 2.5vw, 18px);
  line-height: var(--line-height-base);
  font-family: var(--font-family-base);
  scroll-behavior: smooth;
  text-size-adjust: 100%;
  -webkit-text-size-adjust: 100%;
}

body {
  font-size: var(--font-size-base);
  line-height: var(--line-height-base);
  font-family: var(--font-family-base);
  direction: var(--direction);
  text-align: var(--text-align);
  min-font-size: 16px; /* Ensure minimum readable size */
}

/* Headings with fluid scale */
h1, .ant-typography h1 {
  font-size: clamp(1.8rem, 4vw, 3rem);
  line-height: 1.2;
  font-weight: 700;
  margin-bottom: var(--space-lg);
  color: var(--primary-color);
}

h2, .ant-typography h2 {
  font-size: clamp(1.5rem, 3.5vw, 2.5rem);
  line-height: 1.3;
  font-weight: 600;
  margin-bottom: var(--space-md);
}

h3, .ant-typography h3 {
  font-size: clamp(1.25rem, 3vw, 2rem);
  line-height: 1.4;
  font-weight: 600;
  margin-bottom: var(--space-md);
}

h4, .ant-typography h4 {
  font-size: clamp(1.125rem, 2.5vw, 1.5rem);
  line-height: 1.4;
  font-weight: 600;
  margin-bottom: var(--space-sm);
}

h5, .ant-typography h5 {
  font-size: clamp(1rem, 2vw, 1.25rem);
  line-height: 1.5;
  font-weight: 600;
  margin-bottom: var(--space-sm);
}

h6, .ant-typography h6 {
  font-size: clamp(0.875rem, 1.5vw, 1.125rem);
  line-height: 1.5;
  font-weight: 600;
  margin-bottom: var(--space-sm);
}

/* Body text with optimal line length */
p, .ant-typography p {
  font-size: var(--font-size-base);
  line-height: var(--line-height-base);
  max-width: 70ch; /* Optimal reading line length */
  margin-bottom: var(--space-md);
}

/* ===== FOCUS MANAGEMENT ===== */
/* Enhanced focus styles for accessibility */
*:focus,
*:focus-visible {
  outline: var(--focus-ring-width) solid var(--focus-ring-color) !important;
  outline-offset: var(--focus-ring-offset) !important;
  border-radius: var(--border-radius-sm);
  transition: outline var(--transition-duration) var(--transition-easing);
}

/* Remove focus outline when not needed */
*:focus:not(:focus-visible) {
  outline: none !important;
}

/* Skip link for screen readers */
.skip-link {
  position: absolute;
  top: -40px;
  left: 6px;
  background: var(--primary-color);
  color: white;
  padding: var(--space-sm) var(--space-md);
  text-decoration: none;
  border-radius: var(--border-radius-md);
  z-index: 9999;
  font-weight: 600;
  transition: top var(--transition-duration) var(--transition-easing);
}

.skip-link:focus {
  top: 6px;
}

/* ===== HIGH CONTRAST MODE ===== */
[data-high-contrast="true"] {
  --primary-color: #0000ff;
  --secondary-color: #000000;
  --accent-color: #0000ff;
  --error-color: #ff0000;
  --focus-ring-color: #ff0000;
  --shadow-sm: none;
  --shadow-md: none;
  --shadow-lg: none;
  --shadow-xl: none;
}

[data-high-contrast="true"] .ant-card,
[data-high-contrast="true"] .ant-btn,
[data-high-contrast="true"] .ant-input,
[data-high-contrast="true"] .ant-select {
  border: 2px solid #000000 !important;
  box-shadow: none !important;
}

[data-high-contrast="true"] .ant-btn-primary {
  background: #0000ff !important;
  border-color: #0000ff !important;
  color: #ffffff !important;
}

[data-high-contrast="true"] .ant-btn-primary:hover {
  background: #000080 !important;
  border-color: #000080 !important;
}

/* ===== EYE-COMFORT MODE ===== */
[data-theme-mode="eye-comfort"] {
  --primary-color: #4c6ef5;
  --secondary-color: #6c757d;
  --accent-color: #74c0fc;
  --error-color: #ff6b6b;
  
  /* Softer background colors */
  --bg-base: #f8f9fa;
  --bg-container: #ffffff;
  --bg-elevated: #f1f3f5;
  
  /* Reduced contrast text */
  --text-primary: #212529;
  --text-secondary: #495057;
  --text-tertiary: #6c757d;
  
  /* Softer borders */
  --border-color: #e9ecef;
  --border-color-light: #f1f3f5;
  
  /* Reduced shadows */
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.08);
  --shadow-md: 0 2px 8px rgba(0, 0, 0, 0.12);
  --shadow-lg: 0 4px 16px rgba(0, 0, 0, 0.16);
}

[data-theme-mode="eye-comfort"] .ant-layout-content {
  background: var(--bg-base) !important;
}

[data-theme-mode="eye-comfort"] .ant-card {
  background: var(--bg-container) !important;
  border-color: var(--border-color) !important;
  box-shadow: var(--shadow-sm) !important;
}

/* ===== REDUCED MOTION ===== */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

[data-motion-preference="reduced"] *,
[data-motion-preference="reduced"] *::before,
[data-motion-preference="reduced"] *::after {
  animation-duration: 0.01ms !important;
  animation-iteration-count: 1 !important;
  transition-duration: 0.01ms !important;
  scroll-behavior: auto !important;
}

[data-motion-preference="none"] *,
[data-motion-preference="none"] *::before,
[data-motion-preference="none"] *::after {
  animation: none !important;
  transition: none !important;
  scroll-behavior: auto !important;
}

/* ===== IMPROVED INTERACTIVE ELEMENTS ===== */
/* Buttons with better touch targets */
.ant-btn {
  min-height: 44px; /* WCAG AA touch target size */
  min-width: 44px;
  font-weight: 600;
  border-radius: var(--border-radius-md);
  transition: all var(--transition-duration) var(--transition-easing);
  position: relative;
  overflow: hidden;
}

.ant-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: currentColor;
  opacity: 0;
  transition: opacity var(--transition-duration) var(--transition-easing);
  pointer-events: none;
}

.ant-btn:hover::before {
  opacity: 0.08;
}

.ant-btn:active::before {
  opacity: 0.12;
}

/* Form inputs with better accessibility */
.ant-input,
.ant-select-selector,
.ant-picker {
  min-height: 44px;
  border-radius: var(--border-radius-md);
  font-size: var(--font-size-base);
  line-height: var(--line-height-base);
  transition: all var(--transition-duration) var(--transition-easing);
}

.ant-input:focus,
.ant-select-focused .ant-select-selector,
.ant-picker:focus {
  box-shadow: 0 0 0 var(--focus-ring-width) var(--focus-ring-color);
}

/* ===== IMPROVED CONTRAST RATIOS ===== */
/* Ensure all text meets WCAG AA contrast requirements */
.ant-typography,
.ant-typography p,
.ant-typography span,
.ant-typography div {
  color: var(--text-primary);
}

.ant-typography-caption,
.ant-typography .ant-typography-caption {
  color: var(--text-secondary);
  font-size: max(0.875rem, 14px); /* Ensure minimum readable size */
}

/* Links with better visibility */
a,
.ant-typography a {
  color: var(--accent-color);
  text-decoration: underline;
  text-underline-offset: 2px;
  text-decoration-thickness: 1px;
  transition: all var(--transition-duration) var(--transition-easing);
}

a:hover,
.ant-typography a:hover {
  color: var(--primary-color);
  text-decoration-thickness: 2px;
}

a:focus,
.ant-typography a:focus {
  outline: var(--focus-ring-width) solid var(--focus-ring-color);
  outline-offset: var(--focus-ring-offset);
  border-radius: var(--border-radius-sm);
}

/* ===== RTL SUPPORT IMPROVEMENTS ===== */
[dir="rtl"] {
  text-align: right;
}

[dir="rtl"] .ant-layout-sider {
  right: 0;
  left: auto;
}

[dir="rtl"] .ant-menu-item,
[dir="rtl"] .ant-menu-submenu-title {
  text-align: right;
  padding-right: 24px;
  padding-left: 16px;
}

[dir="rtl"] .ant-menu-item-icon {
  margin-right: 0;
  margin-left: 8px;
}

/* ===== LOADING STATES WITH ACCESSIBILITY ===== */
.loading-skeleton {
  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

/* Screen reader only content */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* ===== PRINT STYLES ===== */
@media print {
  * {
    background: transparent !important;
    color: black !important;
    box-shadow: none !important;
    text-shadow: none !important;
  }
  
  .ant-layout-sider,
  .ant-layout-header {
    display: none !important;
  }
  
  .ant-layout-content {
    margin: 0 !important;
    padding: 0 !important;
  }
  
  a,
  a:visited {
    text-decoration: underline;
  }
  
  a[href^="http"]:after {
    content: " (" attr(href) ")";
  }
  
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  
  p, blockquote {
    orphans: 3;
    widows: 3;
  }
  
  blockquote, ul, ol {
    page-break-inside: avoid;
  }
}

/* ===== RESPONSIVE IMPROVEMENTS ===== */
@media (max-width: 768px) {
  :root {
    --font-size-base: max(16px, 4vw);
  }
  
  .ant-btn {
    min-height: 48px; /* Larger touch targets on mobile */
    min-width: 48px;
  }
  
  .ant-input,
  .ant-select-selector,
  .ant-picker {
    min-height: 48px;
    font-size: 16px; /* Prevent zoom on iOS */
  }
}

/* ===== DARK MODE ACCESSIBILITY ===== */
[data-theme="dark"] {
  color-scheme: dark;
}

[data-theme="dark"] .ant-typography,
[data-theme="dark"] .ant-typography p {
  color: #ffffff;
}

[data-theme="dark"] .ant-typography-caption {
  color: #a6a6a6;
}

[data-theme="dark"] a,
[data-theme="dark"] .ant-typography a {
  color: #74c0fc;
}

[data-theme="dark"] a:hover,
[data-theme="dark"] .ant-typography a:hover {
  color: #91d5ff;
}

/* ===== ENHANCED FOCUS INDICATORS ===== */
.ant-menu-item:focus,
.ant-menu-submenu-title:focus {
  background: rgba(64, 150, 255, 0.1) !important;
  outline: var(--focus-ring-width) solid var(--focus-ring-color) !important;
  outline-offset: -2px !important;
}

.ant-card:focus-within {
  outline: var(--focus-ring-width) solid var(--focus-ring-color);
  outline-offset: var(--focus-ring-offset);
}

/* ===== IMPROVED ERROR STATES ===== */
.ant-form-item-has-error .ant-input,
.ant-form-item-has-error .ant-select-selector {
  border-color: var(--error-color) !important;
  box-shadow: 0 0 0 2px rgba(255, 36, 36, 0.2) !important;
}

.ant-form-item-explain-error {
  color: var(--error-color);
  font-weight: 500;
  margin-top: var(--space-xs);
}

/* ===== STATUS INDICATORS ===== */
.status-indicator {
  display: inline-flex;
  align-items: center;
  gap: var(--space-xs);
  font-weight: 500;
}

.status-indicator::before {
  content: '';
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: currentColor;
}

.status-success {
  color: #52c41a;
}

.status-warning {
  color: #faad14;
}

.status-error {
  color: var(--error-color);
}

.status-info {
  color: var(--accent-color);
}
